<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <title>Michi Box-Card Game</title>
  
  <!-- Estilos -->
  <link rel="stylesheet" type="text/css" href="style/normalize.css" />
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Covered+By+Your+Grace&family=Fredericka+the+Great&family=Kranky&family=Lacquer&family=Slackside+One&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="/assets/icon-192.png">   

  <!-- Librer√≠as externas -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body class="indexbackground">
<main>


  <!------------------------BANNER PRESENTACION------------------------------------->
  <div class="contenedor">
    <div class="logo lazy-michi"></div>
    <div class="botonesmenu">
      <a onclick="mostrarGaleria()" class="galeriaapp lazy-michi" style="background-image: url(./assets/galeriacartasicon.webp);"></a>
      <a onclick="mostrarQuees()" class="quees lazy-michi" style="background-image: url(./assets/boton_QUE_ES.webp);"></a>
      <a onclick="mostrarNoticias()" class="insta lazy-michi" style="background-image: url(./assets/boton_NOTICIAS.webp);"></a>
            <div class="insta lazy-michi" style="background-image: url(./assets/boton_NOTICIAS.webp);"></div>
    </div>


  <button id="installBtn" class="descargarapp "> </button>


    <p class="descripcionbanner">Michi box - Juego de gatos coleccionables. Proyectual Digitalizaci√≥n I 2025. dise√±o y realizaci√≥n: Jos√© Ignacio Pyptyk</p>
  </div>
  <!------------------------------------------------------------------------>


    <!------------------------galeria html------------------------------------>
  <div id="galeriaContainer">
    <iframe src="galeria.html" style="width: 100%; height: 100%; border: none;"></iframe>
  </div>

  <!------------------------------------------------------------------------>

      <!------------------------QUE ES? html------------------------------------>
  <div id="queesContainer" >
    <iframe src="quees.html" style="width: 100%; height: 100%; border: none;"></iframe>
  </div>

  <!------------------------------------------------------------------------>


        <!------------------------NOTICIAS html------------------------------------>
  <div id="noticiasContainer" >
    <iframe src="noticias.html" style="width: 100%; height: 100%; border: none;"></iframe>
  </div>

  <!------------------------------------------------------------------------>

</main>



<!-- Scripts al final para que cargue todo el DOM primero -->
<script>
  let deferredPrompt = null;

  document.addEventListener("DOMContentLoaded", () => {
    const installBtn = document.getElementById("installBtn");

    // üîπ Ocultar el bot√≥n si ya estamos en modo app (PWA instalada)
    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
    if (isStandalone && installBtn) {
      installBtn.style.display = "none";
    }

    // üîπ Evento para mostrar bot√≥n solo si se puede instalar
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      if (installBtn) installBtn.style.display = "block";
    });

    // üîπ Manejo del clic en el bot√≥n de instalaci√≥n
    if (installBtn) {
      installBtn.addEventListener("click", async (e) => {
        e.preventDefault();
        if (!deferredPrompt) return;

        deferredPrompt.prompt();
        const result = await deferredPrompt.userChoice;
        console.log("Instalaci√≥n:", result.outcome);

        if (result.outcome === "accepted") {
          console.log("‚úÖ App instalada");
          installBtn.style.display = "none";
        } else {
          console.log("‚ùå Instalaci√≥n cancelada");
        }

        deferredPrompt = null;
      });
    }
  });

  // üîπ Inicializar AOS
  AOS.init();

  // üîπ Registrar Service Worker
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js")
      .then(() => console.log("Service Worker registrado"))
      .catch((error) => console.error("Error al registrar el Service Worker", error));
  }
</script>

<script src="sketch/sketch.js"></script>
</body>
</html>
